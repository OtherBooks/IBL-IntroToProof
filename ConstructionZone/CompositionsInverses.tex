\begin{section}{Compositions and Inverses}

\begin{definition}
If $f:X\to Y$ and $g:Y\to Z$ are functions, then a new function $g\circ f:X\to Z$ can be defined by $(g\circ f)(x)=g(f(x))$ for all $x\in\dom(f)$.
\end{definition}

It is important to notice that the function on the right is the one that ``goes first.''

\begin{exercise}
In each case, give examples of finite sets $X$, $Y$, and $Z$, and functions $f:X\to Y$ and $g:Y\to Z$ that satisfy the given conditions.  Drawing bubble diagrams is sufficient.
\begin{enumerate}[label=\textrm{(\alph*)}]
\item $f$ is onto, but $g\circ f$ is not onto.
\item $g$ is onto, but $g\circ f$ is not onto.
\item $f$ is one-to-one, but $g\circ f$ is not one-to-one.
\item $g$ is one-to-one, but $g\circ f$ is not.
\end{enumerate}
\end{exercise}

\begin{theorem}
If $f:X\to Y$ and $g:Y\to Z$ are both functions that are onto, then $g\circ f$ is also onto.
\end{theorem}

\begin{theorem}
If $f:X\to Y$ and $g:Y\to Z$ are both functions that are one-to-one, then $g\circ f$ is also one-to-one.
\end{theorem}

\begin{corollary}
If $f:X\to Y$ and $g:Y\to Z$ are both bijections, then $g\circ f$ is also a bijection.
\end{corollary}

\begin{problem}
Assume that $f:X\to Y$ and $g:Y\to Z$ are both functions.  Determine whether each of the following statements is true or false. If the statement is true, prove it.  Otherwise, provide a counterexample.
\begin{enumerate}[label=\textrm{(\alph*)}]
\item If $g\circ f$ is one-to-one, then $f$ is one-to-one.
\item If $g\circ f$ is one-to-one, then $g$ is one-to-one.
\item If $g\circ f$ is onto, then $f$ is onto.
\item If $g\circ f$ is onto, then $g$ is onto.
\end{enumerate}
\end{problem}

The next theorem tells us that function composition is associative.

\begin{theorem}
If $f:X\to Y$, $g:Y\to Z$, and $h:Z\to W$ are functions, then $(f\circ g)\circ h = f\circ (g\circ h)$.
\end{theorem}

\begin{theorem}
Let $f:X\to Y$ be a function. Then $f$ is one-to-one if and only if there exists a function $g:Y\to X$ such that $g\circ f=i_X$, where $i_X$ is the identity function on $X$.
\end{theorem}

The function $g$ in the previous theorem is often called a \emph{left inverse} of $f$.

\begin{theorem}
Let $f:X\to Y$ be a function. Then $f$ is onto if and only if there exists a function $g:Y\to X$ such that $f\circ g=i_Y$, where $i_Y$ is the identity function on $Y$.
\end{theorem}

The function $g$ in the previous theorem is often called a \emph{right inverse} of $f$.

\begin{exercise}
Provide an example of a function that has a left inverse but does not have a right inverse. Find the left inverse of your proposed function.
\end{exercise}

\begin{exercise}
Provide an example of a function that has a right inverse but does not have a left inverse. Find the right inverse of your proposed function.
\end{exercise}

\begin{corollary}\label{cor:two-sided inverse}
If $f:X\to Y$ and $g:Y\to X$ are functions satisfying $g\circ f=i_X$ and  $f\circ g=i_Y$, then $f$ is a bijection.
\end{corollary}

In the previous result, the functions $f$ and $g$ ``cancel" each other out. We say that $g$ is a \emph{two-sided inverse} of $f$.

\begin{definition}
Let $f:X\to Y$ be a function.  The relation $f^{-1}$, called \textbf{$f$ inverse}, is defined via
\[
f^{-1}=\{(f(x),x)\in Y\times X\mid x\in X\}.
\]
\end{definition}

Notice that we called $f^{-1}$ a relation and not a function.  In some circumstances $f^{-1}$ will be a function and sometimes it will not be.

\begin{exercise}
Provide an example of a function $f:X\to Y$ such that $f^{-1}$ is \emph{not} a function.  A bubble diagram is sufficient.
\end{exercise}

\begin{exercise}
Provide an example of a function $f:X\to Y$ such that $f^{-1}$ is a function. A bubble diagram is sufficient.
\end{exercise}

\begin{theorem}
Let $f:X\to Y$ be a function.  Then $f^{-1}$ is a function if and only if $f$ is a bijection.
\end{theorem}

\begin{theorem}\label{thm:comp of inverses}
If $f:X\to Y$ is a bijection, then
\begin{enumerate}[label=\textrm{(\alph*)}]
\item $f^{-1}\circ f=i_X$, and
\item $f\circ f^{-1}=i_Y$.
\end{enumerate}
\end{theorem}

\begin{theorem}\label{thm:unique inverse}
Let $f:X\to Y$ and $g:Y\to X$ be functions such that $f$ is a bijection.  If $g\circ f=i_X$ and $f\circ g=i_Y$, then $g=f^{-1}$.
\end{theorem}

The upshot of the previous two theorems is that if $f^{-1}$ is a function, then it is the only one satisfying the two-sided inverse property exhibited in Corollary~\ref{cor:two-sided inverse} and Theorem~\ref{thm:comp of inverses}. %The next theorem can be considered to be the converse of Theorem~\ref{thm:unique inverse}.

\begin{theorem}
If $f:X\to Y$ is a bijection, then $f^{-1}:Y\to X$ is a bijection and $(f^{-1})^{-1}=f$.
\end{theorem}

\begin{theorem}
If $f:X\to Y$ and $g:Y\to Z$ are both bijections, then $(g\circ f)^{-1}=f^{-1}\circ g^{-1}$.
\end{theorem}

The previous theorem is sometimes referred to as the ``socks and shoes theorem".  Do you see how it got this name?

\begin{theorem}
Let $f:X\to Y$ be a function and define $\sim$ on $X$ via $a\sim b$ if and only if $f(a) = f(b)$.
\begin{enumerate}[label=\textrm{(\alph*)}]
\item The relation $\sim$ is an equivalence relation,
\item Each equivalence class $[a]$ is equal to $f^{-1}(f(a))$,
\item The function $g:X/\mathord\sim\to f(X)$ defined via $g([a]) = f(a)$ is a bijection.
\end{enumerate}
\end{theorem}

\end{section}